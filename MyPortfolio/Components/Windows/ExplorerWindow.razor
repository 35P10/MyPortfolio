@using MyPortfolio.Components.Windows.Tab

<div class="window box-shadow">
	<div class="window-header">
		<h3>@Title</h3>
		<button type="button"
				class="box-shadow">
			X
		</button>
	</div>
	<CascadingValue Value="this">
		<div class="window-content-section explorer-window">
			<div class="tab-section">
				@foreach (ExplorerTab tabPage in Pages)
				{
					<button type="button"
							class="box-shadow @GetButtonClass(tabPage)"
							@onclick=@( () => ActivatePage(tabPage) )>
						@tabPage.Text
					</button>
				}
			</div>
			<div class="window-content" style="@GetHeight()">
				@ChildContent
			</div>
		</div>
	</CascadingValue>
</div>

@code {
	[Parameter]
	public RenderFragment ChildContent { get; set; }

	[Parameter]
	public string Height { get; set; } = "120px";

	[Parameter]
	public String Title { get; set; }


	public ExplorerTab ActivePage { get; set; }
	List<ExplorerTab> Pages = new List<ExplorerTab>();

	internal void AddPage(ExplorerTab tabPage)
	{
		Pages.Add(tabPage);
		if (Pages.Count == 1)
			ActivePage = tabPage;
		StateHasChanged();
	}

	string GetHeight()
	{
		return "height :" + Height;
	}

	string GetButtonClass(ExplorerTab page)
	{
		return page == ActivePage ? "button-selected" : "button-unselected";
	}

	void ActivatePage(ExplorerTab page)
	{
		ActivePage = page;
	}
}